# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –ò–ò-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–≤ –ø–æ —Ä–∞–±–æ—Ç–µ —Å ALPACA Test Bench

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã

ALPACA Test Bench - —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏ –µ–≥–æ –æ—á–∏—Å—Ç–∫–∏ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤. –¶–µ–ª—å - –ø–æ–ª—É—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π Markdown –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ —Å–∏—Å—Ç–µ–º–∞—Ö —Ç–∏–ø–∞ Dify.

## üß† –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã —Å —Å–∏—Å—Ç–µ–º–æ–π

### 1. –ú–µ—Ç–æ–¥–∏—á–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é
- **–û–¥–∏–Ω —Ñ–∞–π–ª –∑–∞ —Ä–∞–∑**: –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –∫–∞–∂–¥—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –æ—Ü–µ–Ω–∫–∏
- **–ü–æ—à–∞–≥–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑**: –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ pipeline
- **–°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑**: –í—Å–µ–≥–¥–∞ —Å—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤
- **–î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –í–µ–¥–∏—Ç–µ –∑–∞–ø–∏—Å–∏ –æ –ª—É—á—à–∏—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### 2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ unstructured
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ –ø—Ä–∏–º–µ–Ω—è–π—Ç–µ `UnstructuredPartitionExtractor`, –∫–æ—Ç–æ—Ä—ã–π –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç `unstructured.partition_*` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `partition_pdf`, `partition_docx`, `partition_md`).
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ —Ç–∏–ø—ã —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (`Title`, `NarrativeText`, `ListItem`, `Table`, `Header`, `Footer`) ‚Äî –æ–Ω–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ `ProcessingResult.metadata['elements']`.
- –ü–æ–¥–∫–ª—é—á–∞–π—Ç–µ `UnstructuredLLMCleaner` –¥–ª—è –∏–Ω—Ç–µ–ª–ª–µ–∫—É—Ç–∞–ª—å–Ω–æ–π –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏: —Å–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è `unstructured.cleaners.clean_text` / `element.apply(...)`, –∑–∞—Ç–µ–º –ø–æ –∂–µ–ª–∞–Ω–∏—é –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è LLM —á–µ—Ä–µ–∑ `llm_callable`.
- –ü–æ–ª—å–∑—É–π—Ç–µ—Å—å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ `drop_types` –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –≤–æ–¥—è–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤, –Ω–æ–º–µ—Ä–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü –∏ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è —à–∞–ø–æ–∫.
- –î–ª—è —Ç–æ—á–µ—á–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤—ã–∑—ã–≤–∞–π—Ç–µ `process_element(element, filters=[...])`.

### 2. –ü–æ–Ω–∏–º–∞–Ω–∏–µ pipeline –æ–±—Ä–∞–±–æ—Ç–∫–∏
```
–î–æ–∫—É–º–µ–Ω—Ç ‚Üí –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ ‚Üí –ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ ‚Üí Markdown ‚Üí –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞
```

–ö–∞–∂–¥—ã–π —ç—Ç–∞–ø –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–µ–Ω:
- **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ**: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—ã—Ä–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- **–ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞**: –û—á–∏—Å—Ç–∫–∞ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è
- **Markdown**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- **–û—Ü–µ–Ω–∫–∞**: –ú–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ

## üîß –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å PDF —Ñ–∞–π–ª–∞–º–∏
```python
# –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤:
1. PDFPlumber - –ª—É—á—à–µ –≤—Å–µ–≥–æ –¥–ª—è —Ç–∞–±–ª–∏—Ü –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
2. PyMuPDF - —Ö–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ —Ç–µ–∫—Å—Ç–∞, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —à—Ä–∏—Ñ—Ç–æ–≤  
3. PyPDF - –±—ã—Å—Ç—Ä—ã–π, –±–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
4. PDFMiner - –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑, –º–µ–¥–ª–µ–Ω–Ω–µ–µ
5. Camelot - —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- PDFPlumber –æ—Ç–ª–∏—á–Ω–æ –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—ã, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ —Å —Ç–∞–±–ª–∏—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- PyMuPDF (fitz) –ª—É—á—à–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —à—Ä–∏—Ñ—Ç–∞–º–∏
- –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å–æ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ PDF –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ OCR –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã

### –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å Word –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏
```python
# –î–ª—è .docx —Ñ–∞–π–ª–æ–≤:
1. python-docx - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
2. docx2txt - –ø—Ä–æ—Å—Ç–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞

# –î–ª—è —Å—Ç–∞—Ä—ã—Ö .doc —Ñ–∞–π–ª–æ–≤ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è
```

### –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è–º–∏
- python-pptx –∏–∑–≤–ª–µ–∫–∞–µ—Ç —Ç–µ–∫—Å—Ç —Å–ª–∞–π–¥–æ–≤, –∑–∞–º–µ—Ç–∫–∏, –º–∞–∫–µ—Ç—ã
- –û–±—Ä–∞—â–∞–π—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏
- –ó–∞–º–µ—Ç–∫–∏ –¥–æ–∫–ª–∞–¥—á–∏–∫–∞ —á–∞—Å—Ç–æ —Å–æ–¥–µ—Ä–∂–∞—Ç –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

### –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ Excel
```python
# –°—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏:
1. openpyxl - –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö .xlsx —Ñ–∞–π–ª–æ–≤
2. pandas - –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
3. xlrd - —Ç–æ–ª—å–∫–æ –¥–ª—è legacy .xls —Ñ–∞–π–ª–æ–≤

# –í–∞–∂–Ω–æ:
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ –∫–∞–∂–¥—ã–π –ª–∏—Å—Ç –æ—Ç–¥–µ–ª—å–Ω–æ
- –£—á–∏—Ç—ã–≤–∞–π—Ç–µ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã–µ —è—á–µ–π–∫–∏
- –°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü –≤ Markdown
```

### OCR –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```python
# Tesseract OCR:
- –õ—É—á—à–µ –¥–ª—è –ø–µ—á–∞—Ç–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ —è–∑—ã–∫–æ–≤
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Ä–µ–∂–∏–º—ã —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏

# EasyOCR:
- –õ—É—á—à–µ –¥–ª—è —Ä—É–∫–æ–ø–∏—Å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ GPU —É—Å–∫–æ—Ä–µ–Ω–∏—è
- –ë–æ–ª–µ–µ —É—Å—Ç–æ–π—á–∏–≤ –∫ –∏—Å–∫–∞–∂–µ–Ω–∏—è–º
```

## üìä –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –∫–∞—á–µ—Å—Ç–≤–∞

### –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:
1. **Text Length** (0.1 –≤–µ—Å) - –æ–±—ä–µ–º –∏–∑–≤–ª–µ—á–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
   - –ë–æ–ª—å—à–µ –Ω–µ –≤—Å–µ–≥–¥–∞ –ª—É—á—à–µ - –≤–∞–∂–Ω–æ –∫–∞—á–µ—Å—Ç–≤–æ
   - –°—Ä–∞–≤–Ω–∏–≤–∞–π—Ç–µ —Å –∏—Å—Ö–æ–¥–Ω—ã–º –æ–±—ä–µ–º–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–∞

2. **Readability** (0.2 –≤–µ—Å) - —á–∏—Ç–∞–µ–º–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–∞
   - Flesch Reading Ease: 60-70 –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ
   - Automated Readability Index: —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —É—Ä–æ–≤–Ω—é –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è

3. **Structure Preservation** (0.3 –≤–µ—Å) - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
   - –ù–∞–ª–∏—á–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ (H1-H6)
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å–ø–∏—Å–∫–æ–≤ –∏ —Ç–∞–±–ª–∏—Ü
   - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–æ–≤

4. **Formatting Quality** (0.2 –≤–µ—Å) - –∫–∞—á–µ—Å—Ç–≤–æ Markdown
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
   - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–∏—à–Ω–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤
   - –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

5. **Error Rate** (0.2 –≤–µ—Å) - —É—Ä–æ–≤–µ–Ω—å –æ—à–∏–±–æ–∫
   - –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∏–∑–≤–ª–µ—á–µ–Ω–∏—è
   - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
   - –†–∞–∑–æ—Ä–≤–∞–Ω–Ω—ã–µ —Å–ª–æ–≤–∞

### –ö–∞–∫ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
- **90%+**: –û—Ç–ª–∏—á–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞
- **70-89%**: –•–æ—Ä–æ—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ, –Ω–µ–±–æ–ª—å—à–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∏
- **50-69%**: –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ, —Ç—Ä–µ–±—É–µ—Ç —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—á–∏—Å—Ç–∫–∏
- **<50%**: –ù–µ—É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ, —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –¥—Ä—É–≥–æ–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä

## üéõÔ∏è –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. **–ù–∞—á–Ω–∏—Ç–µ —Å –±–∞–∑–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫**
```python
# –í–∫–ª—é—á–∏—Ç–µ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
processors = ["pdfplumber", "pymupdf", "pypdf", "pdfminer"]
```

2. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ –ø–æ—à–∞–≥–æ–≤–æ**
```python
# –°–Ω–∞—á–∞–ª–∞ –æ–¥–∏–Ω –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä, –∑–∞—Ç–µ–º –¥–æ–±–∞–≤–ª—è–π—Ç–µ
results = []
for processor in processors:
    result = pipeline.process_with_single_processor(file, processor)
    results.append((processor, evaluate_quality(result)))
```

3. **–ö–æ–º–±–∏–Ω–∏—Ä—É–π—Ç–µ –ª—É—á—à–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã**
```python
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤
if document_has_tables:
    primary_processor = "pdfplumber" 
elif document_has_complex_formatting:
    primary_processor = "pymupdf"
else:
    primary_processor = "pypdf"  # –î–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:

1. **–¢–µ–∫—Å—Ç –∏–∑–≤–ª–µ–∫–∞–µ—Ç—Å—è, –Ω–æ –∫–∞—á–µ—Å—Ç–≤–æ –Ω–∏–∑–∫–æ–µ**
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–¥–∏—Ä–æ–≤–∫—É —Ñ–∞–π–ª–∞

2. **–¢–∞–±–ª–∏—Ü—ã –Ω–µ —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç—Å—è**
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PDFPlumber –∏–ª–∏ Camelot
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–µ—Ç–µ–∫—Ü–∏–∏ –ª–∏–Ω–∏–π
   - –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ —Ä—É—á–Ω—É—é —Ä–∞–∑–º–µ—Ç–∫—É –æ–±–ª–∞—Å—Ç–µ–π

3. **OCR —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–ª–æ—Ö–æ**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ä–µ–∂–∏–º —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (PSM)
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–µ–¥–æ–±—Ä–∞–±–æ—Ç–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

4. **Markdown —Å–æ–¥–µ—Ä–∂–∏—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã**
   - –£—Å–∏–ª—å—Ç–µ –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫—É
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∏–ª—å—Ç—Ä—ã –æ—á–∏—Å—Ç–∫–∏
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π workflow

### –î–ª—è –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤:
1. **–ê–Ω–∞–ª–∏–∑ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞**
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (—Ç–µ–∫—Å—Ç, —Ç–∞–±–ª–∏—Ü—ã, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
   - –û—Ü–µ–Ω–∏—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
   - –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã

2. **–ü–µ—Ä–≤–∏—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Å–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä—ã
   - –°—Ä–∞–≤–Ω–∏—Ç–µ –±–∞–∑–æ–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
   - –í—ã–±–µ—Ä–∏—Ç–µ 2-3 –ª—É—á—à–∏—Ö

3. **–¢–æ–Ω–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞**
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ª—É—á—à–∏—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∏
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –ø–æ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞

4. **–í–∞–ª–∏–¥–∞—Ü–∏—è**
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö —Ç–æ–≥–æ –∂–µ —Ç–∏–ø–∞
   - –ò–∑–º–µ—Ä—å—Ç–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
   - –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

### For batch processing:
```python
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
batch_processor = BatchProcessor(
    pipeline=optimized_pipeline,
    workers=4,
    timeout=300
)

results = batch_processor.process_directory(
    input_dir="test_files/pdf/",
    output_dir="outputs/batch_results/"
)
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –∫–∞—á–µ—Å—Ç–≤–∞

–ü—Ä–∏ –æ—Ü–µ–Ω–∫–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞:
- [ ] –ó–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–∑–º–µ—á–µ–Ω—ã (H1-H6)
- [ ] –°–ø–∏—Å–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω—ã  
- [ ] –¢–∞–±–ª–∏—Ü—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ Markdown —Ñ–æ—Ä–º–∞—Ç–µ
- [ ] –ü–∞—Ä–∞–≥—Ä–∞—Ñ—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ:
- [ ] –í–µ—Å—å —Ç–µ–∫—Å—Ç –∏–∑–≤–ª–µ—á–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é
- [ ] –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã (—Å—Ç—Ä–∞–Ω–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã, –ø–æ–≤—Ç–æ—Ä—ã)
- [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ª–æ–≥–∏—á–µ—Å–∫–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- [ ] –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
- [ ] Markdown —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤–∞–ª–∏–¥–µ–Ω
- [ ] –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ª–∏—à–Ω–∏–µ –ø—Ä–æ–±–µ–ª—ã –∏ –ø–µ—Ä–µ–Ω–æ—Å—ã
- [ ] –°—Å—ã–ª–∫–∏ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–∑–º–µ—á–µ–Ω—ã
- [ ] –ö–æ–¥ –∏ —Ü–∏—Ç–∞—Ç—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω—ã

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞:
1. –ù–∞—Å–ª–µ–¥—É–π—Ç–µ—Å—å –æ—Ç `BaseProcessor`
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ `process()`
3. –î–æ–±–∞–≤—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –≤ `processors_config.py`
4. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º –º–æ–¥—É–ª–µ

### –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–π –º–µ—Ç—Ä–∏–∫–∏:
1. –ù–∞—Å–ª–µ–¥—É–π—Ç–µ—Å—å –æ—Ç `BaseMetric`  
2. –†–µ–∞–ª–∏–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ `calculate()`
3. –î–æ–±–∞–≤—å—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É –æ—Ü–µ–Ω–∫–∏
4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–µ—Å –≤ –æ–±—â–µ–π –æ—Ü–µ–Ω–∫–µ

–≠—Ç–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ–º–æ–≥—É—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ALPACA Test Bench –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ—Ü–∏—Ñ—Ä–æ–≤–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.